---
layout: post
title:  "Mapkit JS Demos"
author: eœÄ Maps
description: ""
excerpt: "For when you need an Apple Map"
date:   2018-10-10T23:09:29-08:00
categories: [Mapbox, Paper Maps]
tags: [Mapbox, Paper Maps]
permalink: /mapkit/
redirect_from:
  - /mapkitjs
  - /mapkit-js

---

### Demo of Apple MapKit JS

* Sample Code from [https://developer.apple.com/maps/mapkitjs/](https://developer.apple.com/maps/mapkitjs/)
  * [Add Annotations](/projects/mapkitjs/Add-Annotations.html)
  * [Custom Callout](/projects/mapkitjs/Custom-Callout.html)
  * [Draggable Annotations](/projects/mapkitjs/Draggable-Annotations.html)
  * [Embed](/projects/mapkitjs/Embed.html)
  * [GeoJSON Import](/projects/mapkitjs/GeoJSON-Import.html)
  * [Region and Zoom Limits](/projects/mapkitjs//Region-and-Zoom-Limits.html)
* Sample raster Overlay based on [mapkit.TileOverlay](https://developer.apple.com/documentation/mapkitjs/mapkit/tileoverlay/2974035-mapkit_tileoverlay)
  * [Tile Overlay](/projects/mapkitjs/Tile-Overlay.html)
* WWDC 2018, [Introducing MapKit JS (212)](https://developer.apple.com/videos/play/wwdc2018/212/)
* WWDC 2018, [Getting and Using a MapKit JS Key (508)](https://developer.apple.com/videos/play/wwdc2018/508/)

---

# Happy Place

## Go%20to%20your%20happy%20place

* "*I don't even surf the web anymore.*"

* "*Create a busines around how Apple handles links in messages.*"

**Messages app that sends location and music adventures**

Search within messages for music videos from Apple Music, Spotifiy, Amazon Music.  Text them out.  A better search engine for Music Videos than what exists.  To share The Kinds "Father Xmas" from Apple TV, you have go to iOS or macOS native apps.  Search, tap, tap, scroll, get confused, copy, share, etc.  **THE BEST way to share Apple Music music videos**.  Free is search.  Paid is pre-canned packs.  Dead.  Grateful, etc.  80s list.  Top 100 videos, etc etc.  The genius of

A better Geolocation search and sharing.  **THE BEST search engine for non-profits.  Search San Diego River**

A better Music Video app watching experience on Apple TV.  I'm watching U2, its imposible to share via iphone.  Or a certain time stampe the video.  Rewinding in Apple TV is goofy.  

### Polls for Messages

https://apps.apple.com/us/app/polls-for-imessage/id1142329922

There bullets look like poll buttons.


![](assets/1970-01-01-mapkit-js-cec17c68.png)
---

Fri Dec 10 20:59:51 PST 2021

While making a tweet for @SDRVC to congrate them and create an Apple Maps Web snapshot, I created an idea called "Happy Place"

Create a specific link with text and a pushpin and a map.  Currently built with MapKit in mind.  But could create maps for MapKit, Mapbox, USGS, USFS, historical, Gaia, AllTrails.  

*Vertical* location marketing:  Disneyland, Coachella, Football Stadium, College, Baseball field

*Vertical* Non-profit:  Sierra Club, Boy Scouts, BLT, Land Trusts

*Vertical* Gov't uses:  Evacuation location on a large HP sites.  Emergency:  meeting spot at the Capitol Building, DC..  Where a first responder is needed.

*Vertical* Best places marketing.  Best beaches in San Diego.  Best tacos.  Best whatever...

*Vertical* Video party night  Or grateful dead playlist.  A Dead Playlist is the same as a collection of "Best beachres in San Diego"

**First Prototype** ‚Äî¬†serve from MapKit
* https://maps.apple.com/?t=h&ll=33.008309,117.085150&q=%23,Im%20on%20a%20low%20budget

![](assets/1970-01-01-mapkit-js-d853448b.png)

**2nd idea** - serve from Mapbox

* https:/MAPBOX?t=h&ll=33.008309,117.085150&q=%23,Im%20on%20a%20low%20budget
  * Serve from COGGeoTIFF for existing S# stored maps!!

### Experience

* Pinned people in Messages, get a really tiny thumbnail on the `og:image`

How it looks in Messages

<img src="assets/1970-01-01-mapkit-js-bb3678a8.png" width=25%>

How it looks in Pinned.

JavaScript

    encodeURIComponent("#GoBeavs beat the üê∂s kickoff 3pm üïí")

output

    "%23GoBeavs%20beat%20the%20%F0%9F%90%B6s%20kickoff%203pm%20%F0%9F%95%92"

Link


    https://maps.apple.com/?z=19&t=h&ll=44.55951,-123.28136&q=z19%20%23GoBeavs%20beat%20the%20%F0%9F%90%B6s%20kickoff%203pm%20%F0%9F%95%92

    https://maps.apple.com/?z=20&t=h&ll=44.55951,-123.28136&q=z20%20%23GoBeavs%20beat%20the%20%F0%9F%90%B6s%20kickoff%203pm%20%F0%9F%95%92

    https://maps.apple.com/?z=21&t=h&ll=44.55951,-123.28136&q=z21%20%23GoBeavs%20beat%20the%20%F0%9F%90%B6s%20kickoff%203pm%20%F0%9F%95%92


Crater Lake

    encodeURIComponent("üï∏ nps.gov/crla ‚Äî Go to your happy place üïí")
    %F0%9F%95%B8%20nps.gov%2Fcrla%20%E2%80%94%C2%A0Go%20to%20your%20happy%20place%20%F0%9F%95%92

    https://maps.apple.com/?ll=42.941460,-122.105337&q=%F0%9F%95%B8%20npsgov%2Fcrla%20%E2%80%94%C2%A0Go%20to%20your%20happy%20place%20%F0%9F%95%92

    https://maps.apple.com/?z=12&t=h&ll=42.941460,-122.105337&q=z5th%20Go%20to%20your%20happy%20place

This one works for crater lake z12

    https://maps.apple.com/?z=12&t=h&ll=42.941460,-122.105337&q=z12th%20Go%20to%20your%20happy%20place


![](assets/1970-01-01-mapkit-js-40af54a4.png)

<img alt="1970-01-01-mapkit-js-ab6404bb.png" src="assets/1970-01-01-mapkit-js-ab6404bb.png" width="" height="" ><img alt="1970-01-01-mapkit-js-0fd81d63.png" src="assets/1970-01-01-mapkit-js-0fd81d63.png" width="" height="" >


##### Apple Share location

<img alt="1970-01-01-mapkit-js-6f9fd2b2.png" src="assets/1970-01-01-mapkit-js-6f9fd2b2.png" width="" height="" >

Big Sur. Current Apple ‚ÄúSend Location‚Äù is HTTP. (They should fix that).  Notes:¬†¬†precision =6, ll & Q only (http://maps.apple.com/?ll=33.008309,-117.085150&q=33.008309,-117.085150)
(https://maps.apple.com/?ll=33.008309,-117.085150&q=33.008309,-117.085150) - in Catalina, this goes to Apple Maps with pushpin & no Text.¬†¬†




**Figure: Small thumbnail**

### Architecture ideas

* https://developer.apple.com/imessage/
* https://pollsforimessage.com
* https://developer.apple.com/documentation/messages/icecreambuilder_building_an_imessage_extension

---

### Errors while building @sdrvc

Links with `@` would fail.  On Dec 8 the Apple server team fixed the errors.  But I thought I was seeing things, sent out a tweet, and then realized I had proof that I wasn't crazy.  Until I tried the same on Messages on Catalina (air) & Big Sur (OldSanJuan) & Monterrey (M1).  Those weren't fixed.

While watching the Kinks videos


    q=%40Celloid%20Heroes

Link to

    https://maps.apple.com/?t=h&ll=32.96,-117.265&q=this%20is%20it


Encode

    encodeURIComponent(":web üï∏, eee ùëíœÄ")
    "%3Aweb%20%F0%9F%95%B8%2C%20eee%20%F0%9D%91%92%CF%80"


Link
-123.28136,
          44.55951
    https://maps.apple.com/?t=h&ll=32.9,-116&q=%3Aweb%20%F0%9F%95%B8%2C%20eee%20%F0%9D%91%92%CF%80


maps.apple.com/?t=h&ll=32.96,-117.265&q=%23this%20%20%20is%20it

// this fails with everything after the `@`
* https://maps.apple.com/?t=h&ll=32.96,-117.265&q=%23this%20%20%20is%20it@SDRVC
* Barfs on everything after `@`
* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=%40SDRVC%20Oct%202021%20Lagoon-fronting%20purchase@StuffAfterAt

* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=@SDRVC%20Oct%202021%20Lagoon-fronting%20purchase@StuffAfterAt

* Barfs on everything after `@`
* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=@SDRVC%20Oct%202021%20Lagoon-fronting%20purchase@StuffAfterAt

![](assets/1970-01-01-mapkit-js-8607ac7f.png)

* Leading `@`
* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=@SDRVC%20Oct%202021%20Lagoon-fronting%20purchase@StuffAfterAt
* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=%40SDRVC%20Oct%202021%20Lagoon-fronting%20purchase@StuffAfterAt

# Thanks
```javascript
encodeURIComponent("Thanks @apple MapKit team for fixing the %40==@ encoding problem Dec 8, 2021")
```

> "Thanks%20%40apple%20MapKit%20team%20for%20fixing%20the%20%2540%3D%3D%40%20encoding%20problem%20Dec%208%2C%202021"


> Thanks @apple MapKit team for fixing the %40==@ encoding problem Dec 8, 2021

* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=Thanks%20%40apple%20MapKit%20team%20for%20fixing%20the%20%2540%3D%3D%40%20encoding%20problem%20Dec%208%2C%202021

After tweeting this tweet had 13 impressions and 4 clicks.  What are the chances?!?  Did four apple people immediatly clicking on.  What would happen if this were printed out and placed in the MapKit Bullpen

![](assets/1970-01-01-mapkit-js-8e5a10c9.png)

![](assets/1970-01-01-mapkit-js-f6be7c9a.png)

----

// this works
maps.apple.com/?t=h&ll=32.96,-117.265&q=%23this%20%20%20is%20itüï∏SDRVC

// This works with `Ôº†`, not <shift><2>
maps.apple.com/?t=h&ll=32.96,-117.265&q=%23this%20%20%20is%20itÔº†SDRVC
https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=Ôº†SDRVC%20Oct%202021%20Lagoon-fronting%20purchase
* https://maps.apple.com/?t=h&ll=32.9683,-117.26054&q=%EF%BC%A0SDRVC%20Oct%202021%20Lagoon-fronting%20purchase

![](assets/1970-01-01-mapkit-js-aa617fae.png)

@ @@@@@ Ôº†@ Ôπ´@

---


You can use the MapKit JS docs on [Handling Map Events](https://developer.apple.com/documentation/mapkitjs/mapkit/map/handling_map_events) to print out empirical Camera Distance values to the Javascript console.

```javascript
// https://developer.apple.com/documentation/mapkitjs/mapkit/map/handling_map_events
map.addEventListener("configuration-change", function(event) {console.log(event.status);});
map.addEventListener("map-type-change", function(event)      {console.log(event.target.mapType);});
map.addEventListener("zoom-end", function(event)             {console.log("cameraDistance = " + mapkit.maps[0].cameraDistance);});
map.addEventListener("region-change-end", function(event)    {
  console.log("minCameraDistance Distance max = " + mapkit.maps[0].cameraZoomRange._minCameraDistance,
                                    mapkit.maps[0].cameraDistance.toFixed(3),
                                    mapkit.maps[0].cameraZoomRange._maxCameraDistance
                                  );
});

```

---

Example data for a 600x600 px `#map`, centered at Sydney, NSW.  Through empirical tests, I have estimated the relation between camera distance and a zoom level you would find in Mapbox or Leaflet SDK for JavaScript.

*estimated* Zoom Level = 25 - Floor(log<sub>2</sub>(`cameraDistance`))

| Camera Distance in meters, centered around Australia | Estimated Zoom Level  |
| :-------------: | :-------------: |
| 18,817,301.985 | 1       |
| 1,176,081.374 | 5       |
| 36,752.543 | 10       |
| 1,148.517 | 15       |
| 35.891 | 20       |
| 4.486 | 23       |
