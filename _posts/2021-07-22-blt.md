---
layout: post
title:  "Build Lebanon Trails"
description: "Creating kiosk maps..."
date:   2021-11-02T01:37:00-08:00
author: ePi Rational, Inc.
categories: [trails ü•æ]
tags: ["#mapsForNonProfits"]
permalink: /blt/
excerpt: "Creating kiosk maps for the Build Lebanon Trails association."
excerpt_img: "https://user-images.githubusercontent.com/118112/145622972-6b3b4287-62df-4bcd-803c-559935bc81c5.jpeg"
---

## Print #mapsForNonProfits

During the summer of 2021, we networked with the [Build Lebanon Trails](https://BuildLebanonTrails.com) association (BLT) to help them with their map assets as they start to build more trails in [Lebanon, Oregon](https://roblabs.com/97355).  We started our *pro bono* work by making two trailhead kiosk maps that measured 3'x5' for use at kiosks on their marquee trail:  [The Old Mill Trail](https://buildlebanontrails.com/find-a-trail/).

The project from inception & requirements from BLT to completion and a ribbon cutting ceremony took about 5 months.  At the ceremony Build Lebanon Trails had two great looking historical trailhead kiosks with historical information on the Lebanon area.

But for five months of work, we had only produced two maps, one at each end of the trailhead that would only be seen or used by those physically at the trailheads.  More people in the outdoors is a main goal, but certainly geospatial software tools could help deliver more maps into more people's hands.

# What We built for BLT

## üñ®Ô∏è 2021 Goal *Map for a Trailhead*

* A **3'x5' print map** using OpenStreetMap data + BLT Trail data + Satellite Imagery, built with the [QGIS Print Layout](https://docs.qgis.org/3.22/en/docs/training_manual/forestry/forest_maps.html#basic-fa-preparing-the-print-layout) engine.
  * Symbols for trailheads, parking come from the National Park Service [Symbol Library](https://www.nps.gov/maps/tools/symbol-library/index.html) for a common *look & feel*.

## ü§≥ 2021 Goal `#mapsForSocialMedia`

*  Making use of the [QGIS Atlas Tool](https://docs.qgis.org/3.22/en/docs/training_manual/forestry/forest_maps.html) to generate square images for marketing and sharing on Social Media.  
  
## üçÅ 2021 Goal *Map for Web*
*  A Leaflet based map delivered to BLT for marketing their trails on their [web site](https://buildlebanontrails.com/BuildLebanonTrails.com-online-map/leaflet-2021.html).  Leaflet allows for links that allow you set the zoom and location directly in the link.  See:
  * [Riverview Park](https://buildlebanontrails.com/BuildLebanonTrails.com-online-map/leaflet-2021.html#16/44.5241/-122.8881)
  * [Gills Landing](https://buildlebanontrails.com/BuildLebanonTrails.com-online-map/leaflet-2021.html#16/44.5371/-122.8884)

## ‚òÅÔ∏è 2021 Goal *Efficient Map for Web*
* A [Cloud Optimized GeoTIFF](https://www.cogeo.org) that allow us to produce print ready TIFF files that can be proofed by BLT.  Instead of distributing a 250 MB file to be downloaded and displayed, we used COG to efficiently consume the TIFF file and stream the portions of the map that BLT needed to review.

## üì± 2022 Goals were Mobile Innovations

---
*Figure 1:  Print map of the Build Lebanon Trails system.  A 20"x30" print from a nationwide print retailer.*

<img loading="lazy" alt="Print map of the Build Lebanon Trails system" style="max-height: 500px; max-width: 500px;" src="https://user-images.githubusercontent.com/118112/145622966-42b81244-1920-4d8f-95fb-d13c081ca440.JPG">

---

### QGIS Details

You can easily import an OpenStreetMap extract, `map.osm`, directly into QGIS.  The map requirements were that we had to match previous versions of the map.

In order to reduce or remove some of the extra OpenStreetMap data, QGIS allows for filtering.  Therefore, Streets in black were heavily filtered by ignoring or filtering by `name` or `osm_id`.

Example of filtering:

```sql
-- Identify by Name or OSM ID, the lines you wish to remove
"name" = 'Tangent Street;Corvallis-Lebanon Highway'
OR "name" = 'Hansard Avenue'
OR "name" = 'Reeves Parkway'
OR ("name" = 'Harrison Street'
 AND "osm_id" = '5503677')
OR "name" = 'North 5th Street'
OR ("name" = 'South 5th Street'
    AND "osm_id" = '539462662'
    OR "osm_id" = '876011733')

OR "osm_id" = '113666889'
OR "osm_id" = '5504321'
-- ...
```

---

### Print Details for *Build Lebanon Trails*

* This is a 2'x3' map that is print ready with dimensions of 7200‚Ää√ó‚Ää10800 pixels at 300 pixels per inch.
  * November 2021 - final version [`v2021-11-02`](https://github.com/roblabs/maps-for-non-profits/releases/tag/v2021-11-02)
  * For a web version of this 2'x3' map, see this üó∫Ô∏èüá∫üá∏ [Leaflet map](https://buildlebanontrails.com/BuildLebanonTrails.com-online-map/leaflet-2021.html).  This can be integrated into the Build Lebanon Trails website by downloading this üó∫Ô∏èüá∫üá∏ [97 MB Zip file](https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails.com-online-map.zip).
  * This üó∫Ô∏èüá∫üá∏ [13 MB JPEG](https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/Build-Lebanon-Trails-2x3.jpg) version of the map should only be downloaded if you are interested in printing your own copy of the map.  The image size is 7200‚Ää√ó‚Ää10800 for printing at 300 pixels per inch.
  * This üó∫Ô∏èüá∫üá∏ [53 MB Zipfile](https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/Build-Lebanon-Trails-8x10.zip) contains five maps scaled at 8"x10" for use for printing on letter size pages.  See the 

---

## Maps for Mobile

### Share the World

*"Share the World" with your iMessage contacts by sharing the trails, points of interest, and places that you have explored."*

See the iPhone app specifically built for iMessage at [RobLabs.com/stw](https://RobLabs.com/stw).

### Avenza *Offramps* with a GeoTIFF

We built a version of the Build Lebanon Trails map to work as a *Offline Maps for Mobile*.  And it is designed to work with Avenza Maps, a free download availabe for iOS & Android.

**Note:** From the [Avenza Support site](https://support.avenzamaps.com/hc/en-us/articles/360035432331-Importing-maps-from-custom-locations) on how many maps you can download.

> "*You are able to import an unlimited number of your own maps, however, only 3 maps will be able to use the tools contained within Avenza Maps such as location, placemark creation, & tracking.*"

#### iOS

Install from [Apple App Store](https://apps.apple.com/us/app/avenza-maps/id388424049) and & open Avenza Maps.  Use [iOS docs from Avenza](https://support.avenzamaps.com/hc/en-us/articles/360035432331-Importing-maps-from-custom-locations) if you need additional assistance.
1. Tap this this link when Avenza Maps is installed: [Build-Lebanon-Trails-2x3](avenzamaps://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/Build-Lebanon-Trails-2x3.tif)

---

### Mobile Demo

<video src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/STW-social.720p.mov#t=4" controls="" width="800"></video>

---
<!--#### Android
Install from [Google Play](https://play.google.com/store/apps/details?id=com.Avenza) & open Avenza Maps.  Use [Android docs from Avenza](https://support.avenzamaps.com/hc/en-us/articles/360034714392-Importing-maps-from-custom-locations) if you need additional assistance.
1. Tap this this link when Avenza Maps is installed: [Build-Lebanon-Trails-2x3](avenzamaps://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/Build-Lebanon-Trails-2x3.tif) -->

## Demos

### Maps for Social Media

We have created 1024‚Ää√ó‚Ää1024 pixel images that are perfect for sharing trailheads on social media.  You can *Save Image As ...* in your browser.

<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-3.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-4.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-7.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-11.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-13.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-15.jpg">
<img loading="lazy" width="128px" src="https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/BuildLebanonTrails-Maps-for-Social-Media-18.jpg">

---

### COG

<!-- * 251 MB TIFF for printing, [Build-Lebanon-Trails-2x3-Gill.tif](https://s3.us-west-2.amazonaws.com/com.roblabs.yellow-dog/blt/Build-Lebanon-Trails-2x3-Gill.tif) -->
* [Online version](https://tiles.rdnt.io/preview?url=https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fcom.roblabs.yellow-dog%2Fblt%2FBuild-Lebanon-Trails-2x3-Gill.JPEG.tif&rgb=1%2C2%2C3&nodata=&resample=cubic#14/44.5306/-122.8868) in a full window.

<iframe allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"
style="height: 512px; width: 512px;"
src="https://tiles.rdnt.io/preview?url=https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fcom.roblabs.yellow-dog%2Fblt%2FBuild-Lebanon-Trails-2x3-Gill.JPEG.tif&rgb=1%2C2%2C3&nodata=&resample=#14/44.5393/-122.9059">
  <p>Your browser does not support iframes.</p>
</iframe>

---

### Demo of Building up the Map Layers

We have many layers, but before we consider printing, we need to do filtering in QGIS.

<div>
  <!-- [Image Gallery](github.com/image-gallery) -->
  <div class="carousel-wrapper" style="height: 400px">
    <span class="hidden-target" id="target-item-1"></span>
    <span class="hidden-target" id="target-item-2"></span>
    <span class="hidden-target" id="target-item-3"></span>
    <span class="hidden-target" id="target-item-4"></span>
    <div
      class="carousel-item item-1"
      style="
        background: url(https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/blt-satellite.jpg)
          50% 50% / cover;
        width: 1200px;
        height: 766px;
      "
    >
      <a title="Previous" class="arrow arrow-prev" href="#target-item-4"></a>
      <a title="Next" class="arrow-next-full" href="#target-item-2"></a>
      <figure>
        <figcaption>
          Build Lebanon Trails ‚Äî¬†Satellite only without any OpenStreetMap nor
          trails.
        </figcaption>
      </figure>
    </div>
    <div
      class="carousel-item item-2"
      style="
        background: url(https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/blt-OSM-no-filtering.jpg)
          50% 50% / cover;
        width: 1200px;
        height: 766px;
      "
    >
      <a title="Previous" class="arrow arrow-prev" href="#target-item-1"></a>
      <a title="Next" class="arrow-next-full" href="#target-item-3"></a>
      <figure>
        <figcaption>
          Build Lebanon Trails ‚Äî¬†Unfiltered OpenStreetMap data.
        </figcaption>
      </figure>
    </div>
    <div
      class="carousel-item item-3"
      style="
        background: url(https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/blt-no-trails.jpg)
          50% 50% / cover;
        width: 1200px;
        height: 766px;
      "
    >
      <a title="Previous" class="arrow arrow-prev" href="#target-item-2"></a>
      <a title="Next" class="arrow-next-full" href="#target-item-4"></a>
      <figure>
        <figcaption>
          Build Lebanon Trails ‚Äî¬†Filtered OpenStreetMap data without trails.
        </figcaption>
      </figure>
    </div>
    <div
      class="carousel-item item-4"
      style="
        background: url(https://github.com/roblabs/maps-for-non-profits/releases/download/v2021-11-02/blt.jpg)
          50% 50% / cover;
        width: 1200px;
        height: 766px;
      "
    >
      <a title="Previous" class="arrow arrow-prev" href="#target-item-3"></a>
      <a title="Next" class="arrow-next-full" href="#target-item-1"></a>
      <figure>
        <figcaption>
          Build Lebanon Trails ‚Äî¬†What was shipped to the printer.
        </figcaption>
      </figure>
    </div>
  </div>
  <style>
    figure {
      display: flex;
      flex-direction: column;
      margin: 0;
    }
    figcaption {
      position: absolute;
      bottom: 0;
      left: 0;
      text-align: left;
      font-size: 32px;
      font-style: italic;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 10px;
    }
    figcaption a {
      color: #aaa;
    }
    .carousel-wrapper {
      position: relative;
      margin-bottom: 20px;
    }
    .carousel-wrapper .carousel-item {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 25px 50px;
      opacity: 0;
      transition: all 0.5s ease-in-out;
    }
    .carousel-wrapper .carousel-item .arrow {
      position: absolute;
      top: 0;
      display: block;
      height: 100%;
      background: url("https://dancortes.dev/images/css-carousel/carousel-arrow-dark.png")
        50% 50%/20px no-repeat;
    }
    .carousel-wrapper .carousel-item .arrow.arrow-prev {
      left: 0;
      width: 10%;
    }
    .arrow-next-full {
      position: absolute;
      top: 0;
      display: block;
      height: 100%;
      right: 0;
      width: 88.7%;
    }
    .carousel-wrapper .carousel-item .arrow.arrow-next {
      right: 0;
      -webkit-transform: rotate(180deg);
      transform: rotate(180deg);
    }
    .carousel-wrapper .carousel-item.light {
      color: white;
    }
    .carousel-wrapper .carousel-item.light .arrow {
      background: url("https://dancortes.dev/images/css-carousel/carousel-arrow-light.png")
        50% 50%/20px no-repeat;
    }
    @media (max-width: 500px) {
      .carousel-wrapper .carousel-item .arrow,
      .carousel-wrapper .carousel-item.light .arrow {
        background-size: 10px;
        background-position: 10px 50%;
      }
    }
    .carousel-wrapper [id^="target-item"] {
      display: none;
    }
    .carousel-wrapper .item-1 {
      z-index: 2;
      opacity: 1;
    }
    .carousel-wrapper *:target ~ .item-1 {
      opacity: 0;
    }
    .carousel-wrapper #target-item-1:target ~ .item-1 {
      z-index: 1;
      opacity: 1;
    }
    .carousel-wrapper #target-item-2:target ~ .item-2 {
      z-index: 2;
      opacity: 1;
    }
    .carousel-wrapper #target-item-3:target ~ .item-3 {
      z-index: 3;
      opacity: 1;
    }
    .carousel-wrapper #target-item-4:target ~ .item-4 {
      z-index: 4;
      opacity: 1;
    }
  </style>
</div>
